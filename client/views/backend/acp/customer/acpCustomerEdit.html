<template name="acpCustomerEdit">
{{#if Template.subscriptionsReady}}
  <div class="container acp">
    <div class="row">
      <div class="col-sm-12">
        <h2><button class="btn btn-info" type="button" value="changeEditMode" id="changeEditMode">Editiermodus ist aus</button></h2>
      </div>      
    </div>
    <div class="row">
      <div class="col-sm-12">       
        <h2>{{avId}} <small>{{#if avCustomerName}}{{avCustomerName}}{{else}}{{avName1Old}}{{/if}}</small></h2>
      </div>
    </div>
    <div class="spacer-20"></div>    
    <div class="row">
      {{#if editMode}}
        {{> acpCustomerEditEdit}}           
      {{else}}    
        {{> acpCustomerEditInfo}}    
      {{/if}}      
      <div class="col-sm-4 pull-right">
        <form class="form form-horizontal" id="editCustomerData" role="form">
          <legend>Einstellungen</legend>
          <fieldset>
            <!-- avIsApproved -->
            <div class="form-group">                                
              <div class="col-sm-2">
                {{#if avIsApproved}}
                  <input type="checkbox" class="checkbox acp" id="avIsApproved" name="avIsApproved" checked="checked">
                {{else}}
                  <input type="checkbox" class="checkbox acp" id="avIsApproved" name="avIsApproved">
                {{/if}}
              </div>
              <label for="avIsApproved" class="col-sm-10">Ist geprüft und freigegeben</label>                                                
            </div>
          </fieldset>  
          <legend>Portale</legend>
          <fieldset>
            <!-- avHasAV -->
            <div class="form-group">                                
              <div class="col-sm-2">
                {{#if avHasAV}}
                  <input type="checkbox" class="checkbox acp" id="avHasAV" name="avHasAV" checked="checked">
                {{else}}
                  <input type="checkbox" class="checkbox acp" id="avHasAV" name="avHasAV">
                {{/if}}
              </div>
              <label for="avHasAV" class="col-sm-10">AV-Portal</label>                                                
            </div>
            <!-- avHasRP -->
            <div class="form-group">                   
              <div class="col-sm-2">
                {{#if avHasRP}}
                  <input type="checkbox" class="checkbox acp" id="avHasRP" name="avHasRP" checked="checked">
                {{else}}
                  <input type="checkbox" class="checkbox acp" id="avHasRP" name="avHasRP">
                {{/if}}
              </div>
              <label for="avHasRP" class="col-sm-10">Reiseportal</label>                                                             
            </div>
            <!-- avHasKG -->
            <div class="form-group">                   
              <div class="col-sm-2">
                {{#if avHasKG}}
                  <input type="checkbox" class="checkbox acp" id="avHasKG" name="avHasKG" checked="checked">
                {{else}}
                  <input type="checkbox" class="checkbox acp" id="avHasKG" name="avHasKG">
                {{/if}}
              </div>
              <label for="avHasKG" class="col-sm-10">Kindergarten-Portal</label>                                                             
            </div>
          </fieldset>
          <legend>Sperren</legend>
          <fieldset>                                                  
            {{> checkBlockIndicators}}
          </fieldset>
        </form>
      </div>
    </div>
  </div>
{{else}}
  {{> loading}}
{{/if}}
</template>

<template name="acpCustomerEditInfo">   
  <div class="col-sm-4 acpBox {{#if avIsApproved}}green{{else}}red{{/if}}">    
    <h4>Öffentliche Daten {{#if avIsFeatured}}<span class="pull-right"><i class="fa fa-star featured"></i></span>{{/if}}</h4>
    <p><strong>{{#if avCustomerName}}{{avCustomerName}}{{else}}{{avName1Old}} {{avName2Old}}{{/if}}</strong></p>
    <p>
      {{#if avDepartment}}{{avDepartment}}<br>{{/if}}
      {{#if avPostAddition}}{{avPostAddition}}<br>{{/if}}
      {{#if avStreet}}{{avStreet}}<br>{{/if}}
      {{#if avPlz}}{{avPlz}}{{/if}} {{#if avCity}}{{avCity}}<br>{{/if}}     
      {{#if avCountry}}{{avCountry}}{{/if}}          
    </p>
    <p>
      {{#if avTelephoneFormal}}<i class="fa fa-phone"></i> {{avTelephoneFormal}}<br>{{/if}}
      {{#if avTelefax}}<i class="fa fa-fax"></i> {{avTelefax}}<br>{{/if}}
      {{#if avMailFormal}}<i class="fa fa-envelope"></i> {{avMailFormal}}<br>{{/if}}
      {{#if avUrl}}<br><a href="http://{{avUrl}}" target="_blank">{{avUrl}}</a>{{/if}}
    </p>
    <p>
      {{#if avShortinfo}}<i>{{avShortinfo}}</i>{{/if}}
    </p>
    <hr>
    <h4>Kontaktdaten</h4>
    <p>      
      {{#if avContactPerson}}{{avContactPerson}}<br>{{/if}}
      {{#if avTelephoneInternal}}<i class="fa fa-phone"></i> {{avTelephoneInternal}}<br>{{/if}}
      {{#if avMobil}}<i class="fa fa-phone"></i> {{avMobil}}<br>{{/if}}
      {{#if avMailInternal}}<i class="fa fa-envelope"></i> <a href="mailto:{{avMailInternal}}">{{avMailInternal}}</a> (Intern)<br>{{/if}}
      {{#if avMailContact}}<i class="fa fa-envelope"></i> {{avMailContact}} (Kontaktformular)<br>{{/if}}
      {{#if avMailNewsletter}}<i class="fa fa-envelope"></i> {{avMailNewsletter}} (Newsletter)<br>{{/if}}
    </p>
    <hr>
    <h4>Notizen</h4>
    {{#if avNotes}}
      <p>
        {{avNotes}}
      </p>  
    {{/if}}
    <hr>
    <h4>Weiteres</h4>
    <p>      
      {{#if avKDNr}}Kunden-Nr.: {{avKDNr}}<br>{{/if}}
      {{#if avRandomSort}}Sortierung: {{avRandomSort}}<br>{{/if}}
    </p>
    {{#if avQuestionToCustomerOld}}
      <p>
        Fragen an Kunde: {{avQuestionToCustomerOld}}
      </p>  
    {{/if}}
    {{#if avAnswerFromCustomerOld}}
      <p>
        Mitteilung von Kunde: {{avAnswerFromCustomerOld}}
      </p>
    {{/if}}
    {{#if avmNotizenOld}}
      <p>
        Notizen (alt): {{avmNotizenOld}}
      </p>
    {{/if}}
    
  </div>
</template>
                                                 
<template name="acpCustomerEditEdit"> 
  <div class="col-sm-8 acpBox {{#if avIsApproved}}green{{else}}red{{/if}}">    
    <form class="form form-horizontal" id="editCustomerData" role="form">          
      <div class="spacer-20"></div>     
      <div class="row">    
        <div class="col-sm-12">
          <fieldset>
            <div class="control-group">            
              <div class="controls">              
                <input type="submit" class="btn btn-default" value="Änderung speichern"/>              
              </div>          
            </div>
          </fieldset>          
        </div>
      </div>      
      <div class="spacer-20"></div>
      <hr>
      <div class="spacer-20"></div>
      <div class="row">
        <div class="col-sm-6">
          <fieldset>
            <legend>Öffentliche Daten</legend>
            <!-- avCustomerName -->                
            <div class="form-group is-public">                   
              <label for="avCustomerName" class="col-sm-4 control-label">avCustomerName</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avCustomerName" name="avCustomerName" value="{{avCustomerName}}">                   
              </div>               
            </div>
            <!-- avDepartment -->                
            <div class="form-group is-public">                   
              <label for="avDepartment" class="col-sm-4 control-label">avDepartment</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avDepartment" name="avDepartment" value="{{avDepartment}}">                   
              </div>               
            </div>           
            <!-- avPostAddition -->                
            <div class="form-group is-public">                   
              <label for="avPostAddition" class="col-sm-4 control-label">avPostAddition</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avPostAddition" name="avPostAddition" value="{{avPostAddition}}">                   
              </div>               
            </div>
            <!-- avStreet -->                
            <div class="form-group is-public">                   
              <label for="avStreet" class="col-sm-4 control-label">avStreet</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avStreet" name="avStreet" value="{{avStreet}}">                   
              </div>               
            </div>              
            <!-- avPlz -->                
            <div class="form-group is-public">                   
              <label for="avPlz" class="col-sm-4 control-label">avPlz</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avPlz" name="avPlz" value="{{avPlz}}">                   
              </div>               
            </div>                           
            <!-- avCity -->                
            <div class="form-group is-public">                   
              <label for="avCity" class="col-sm-4 control-label">avCity</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avCity" name="avCity" value="{{avCity}}">                   
              </div>               
            </div>
            <!-- avRegion -->                
            <div class="form-group is-public">                   
              <label for="avRegion" class="col-sm-4 control-label">avRegion</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avRegion" name="avRegion" value="{{avRegion}}">                   
              </div>               
            </div>       
            <!-- avCountry -->                
            <div class="form-group is-public">                   
              <label for="countryData" class="col-sm-4 control-label">avCountry</label>                   
              <div class="col-sm-8">                       
                {{> editCountriesSelect}}                   
              </div>               
            </div>
            <!-- avTelephoneFormal -->                
            <div class="form-group is-public">                   
              <label for="avTelephoneFormal" class="col-sm-4 control-label">avTelephoneFormal</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avTelephoneFormal" name="avTelephoneFormal" value="{{avTelephoneFormal}}">                   
              </div>               
            </div>
            <!-- avTelefax -->                
            <div class="form-group is-public">                   
              <label for="avTelefax" class="col-sm-4 control-label">avTelefax</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avTelefax" name="avTelefax" value="{{avTelefax}}">                   
              </div>                                                    
            </div>
            <!-- avMailFormal -->                
            <div class="form-group is-public">                   
              <label for="avMailFormal" class="col-sm-4 control-label">avMailFormal</label>                   
              <div class="col-sm-8">                       
                <input type="email" class="form-control" id="avMailFormal" name="avMailFormal" value="{{avMailFormal}}">                   
              </div>               
            </div>                     
            <!-- avUrl -->                
            <div class="form-group is-public">                   
              <label for="avUrl" class="col-sm-4 control-label">avUrl</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avUrl" name="avUrl" value="{{avUrl}}">                   
              </div>                                                    
            </div>
            <!-- avShortinfo -->                
            <div class="form-group is-public">                   
              <label for="avShortinfo" class="col-sm-4 control-label">avShortinfo</label>                   
              <div class="col-sm-8">                       
                <textarea class="form-control" id="avShortinfo" name="avShortinfo">{{avShortinfo}}</textarea>                   
              </div>                                                    
            </div>
          </fieldset>
        </div>
        <!-- internal data -->
        <div class="col-sm-6">
          <fieldset>
            <legend>Interne Daten</legend>      
            <!-- avId -->                
            <div class="form-group">                   
              <label for="avId" class="col-sm-4 control-label">avId</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avId" name="avId" value="{{avId}}" disabled>                   
              </div>               
            </div>
            <!-- avRandomSort -->                
            <div class="form-group">                   
              <label for="avRandomSort" class="col-sm-4 control-label">avRandomSort</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avRandomSort" name="avRandomSort" value="{{avRandomSort}}" disabled>                   
              </div>               
            </div>
            <!-- avCreatedOld -->                
            <div class="form-group">                   
              <label for="avCreatedOld" class="col-sm-4 control-label">avCreatedOld</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avCreatedOld" name="avCreatedOld" value="{{avCreatedOld}}" disabled>                   
              </div>               
            </div>
            <!-- avChangedOld -->                
            <div class="form-group">                   
              <label for="avChangedOld" class="col-sm-4 control-label">avChangedOld</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avChangedOld" name="avChangedOld" value="{{avChangedOld}}" disabled>                   
              </div>               
            </div> 
            <!-- avKDNr -->                
            <div class="form-group">                   
              <label for="avKDNr" class="col-sm-4 control-label">avKDNr</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avKDNr" name="avKDNr" value="{{avKDNr}}">                   
              </div>               
            </div>
            <!-- avSiteUrl -->                                   
            <div class="form-group">                   
              <label for="avContactPerson" class="col-sm-4 control-label">avSiteUrl</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avSiteUrl" name="avSiteUrl" value="{{avSiteUrl}}">                   
              </div>               
            </div>                         
            <!-- avName1Old -->                
            <div class="form-group">                   
              <label for="avName1Old" class="col-sm-4 control-label">avName1Old</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avName1Old" name="avName1Old" value="{{avName1Old}}">                   
              </div>               
            </div>
            <!-- avName2Old -->                
            <div class="form-group">                   
              <label for="avName2Old" class="col-sm-4 control-label">avName2Old</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avName2Old" name="avName2Old" value="{{avName2Old}}">                   
              </div>                     
            </div>
            <!-- avRegisterNameOld -->                
            <div class="form-group">                   
              <label for="avRegisterNameOld" class="col-sm-4 control-label">avRegisterNameOld</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avRegisterNameOld" name="avRegisterNameOld" value="{{avRegisterNameOld}}">                   
              </div>               
            </div>
            <!-- avAlpha1Old -->                
            <div class="form-group">                   
              <label for="avAlpha1Old" class="col-sm-4 control-label">avAlpha1Old</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avAlpha1Old" name="avAlpha1Old" value="{{avAlpha1Old}}">                   
              </div>               
            </div>
            <!-- avAlpha2Old -->                
            <div class="form-group">                   
              <label for="avAlpha2Old" class="col-sm-4 control-label">avAlpha2Old</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avAlpha2Old" name="avAlpha2Old" value="{{avAlpha2Old}}">                   
              </div>               
            </div>
            <!-- avAlpha3Old -->                
            <div class="form-group">                   
              <label for="avAlpha3Old" class="col-sm-4 control-label">avAlpha3Old</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avAlpha3Old" name="avAlpha3Old" value="{{avAlpha3Old}}">                   
              </div>               
            </div>
            <!-- avLegalForm -->                
            <div class="form-group">                   
              <label for="avLegalForm" class="col-sm-4 control-label">avLegalForm</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avLegalForm" name="avLegalForm" value="{{avLegalForm}}">                   
              </div>
            </div>          
            <!-- avCityPartOld -->                
            <div class="form-group">                   
              <label for="avCityPartOld" class="col-sm-4 control-label">avCityPartOld</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avCityPartOld" name="avCityPartOld" value="{{avCityPartOld}}">                   
              </div>               
            </div>
            <!-- avKantonOld -->                
            <div class="form-group">                   
              <label for="avKantonOld" class="col-sm-4 control-label">avKantonOld</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avKantonOld" name="avKantonOld" value="{{avKantonOld}}">                   
              </div>               
            </div>
            <!-- avCountryOldId -->                
            <div class="form-group">                   
              <label for="avCountryOldId" class="col-sm-4 control-label">avCountryOldId</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avCountryOldId" name="avCountryOldId" value="{{avCountryOldId}}" disabled>                   
              </div>               
            </div>
            <!-- avTelephoneInternal -->                                   
            <div class="form-group">                   
              <label for="avTelephoneInternal" class="col-sm-4 control-label">avTelephoneInternal</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avTelephoneInternal" name="avTelephoneInternal" value="{{avTelephoneInternal}}">                   
              </div>               
            </div>                          
            <!-- avMobil -->                                   
            <div class="form-group">                   
              <label for="avMobil" class="col-sm-4 control-label">avMobil</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avMobil" name="avMobil" value="{{avMobil}}">                   
              </div>               
            </div>
            <!-- avContactPerson -->                                   
            <div class="form-group">                   
              <label for="avContactPerson" class="col-sm-4 control-label">avContactPerson</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avContactPerson" name="avContactPerson" value="{{avContactPerson}}">                   
              </div>               
            </div>
            <!-- avMailInternal -->                                   
            <div class="form-group">                   
              <label for="avMailInternal" class="col-sm-4 control-label">avMailInternal</label>                   
              <div class="col-sm-8">                       
                <input type="email" class="form-control" id="avMailInternal" name="avMailInternal" value="{{avMailInternal}}">                   
              </div>               
            </div>
            <!-- avMailNewsletter -->                                   
            <div class="form-group">                   
              <label for="avMailNewsletter" class="col-sm-4 control-label">avMailNewsletter</label>                   
              <div class="col-sm-8">                       
                <input type="email" class="form-control" id="avMailNewsletter" name="avMailNewsletter" value="{{avMailNewsletter}}">                   
              </div>               
            </div>       
            <!-- avMailContact -->                                   
            <div class="form-group">                   
              <label for="avMailContact" class="col-sm-4 control-label">avMailContact</label>                   
              <div class="col-sm-8">                       
                <input type="email" class="form-control" id="avMailContact" name="avMailContact" value="{{avMailContact}}">                   
              </div>               
            </div>
            <!-- avCountEmployees -->                                   
            <div class="form-group">                   
              <label for="avCountEmployees" class="col-sm-4 control-label">avCountEmployees</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="avCountEmployees" name="avCountEmployees" value="{{avCountEmployees}}">                   
              </div>               
            </div>            
            <!-- avQuestionToCustomerOld -->                
            <div class="form-group">                   
              <label for="avQuestionToCustomerOld" class="col-sm-4 control-label">avQuestionToCustomerOld</label>                   
              <div class="col-sm-8">                       
                <textarea class="form-control" rows="5" id="avQuestionToCustomerOld" name="avQuestionToCustomerOld">{{avQuestionToCustomerOld}}</textarea>                   
              </div>                                                    
            </div>
            <!-- avAnswerFromCustomerOld -->                
            <div class="form-group">                   
              <label for="avAnswerFromCustomerOld" class="col-sm-4 control-label">avAnswerFromCustomerOld</label>                   
              <div class="col-sm-8">                       
                <textarea class="form-control" rows="5" id="avAnswerFromCustomerOld" name="avAnswerFromCustomerOld">{{avAnswerFromCustomerOld}}</textarea>                   
              </div>                                                    
            </div>
            <!-- avmNotizenOld -->                
            <div class="form-group">                   
              <label for="avmNotizenOld" class="col-sm-4 control-label">avmNotizenOld</label>                   
              <div class="col-sm-8">                       
                <textarea class="form-control" rows="5" id="avmNotizenOld" name="avmNotizenOld">{{avmNotizenOld}}</textarea>                   
              </div>                                                    
            </div>
            <!-- avShortinfo2 -->                
            <div class="form-group">                   
              <label for="avShortinfo2" class="col-sm-4 control-label">avShortinfo2</label>                   
              <div class="col-sm-8">                       
                <textarea class="form-control" rows="5" id="avShortinfo2" name="avShortinfo2">{{avShortinfo2}}</textarea>                   
              </div>                                                    
            </div>
            <!-- avSelfinfoOld -->                
            <div class="form-group">                   
              <label for="avSelfinfoOld" class="col-sm-4 control-label">avSelfinfoOld</label>                   
              <div class="col-sm-8">                       
                <textarea class="form-control" rows="5" id="avSelfinfoOld" name="avSelfinfoOld">{{avSelfinfoOld}}</textarea>                   
              </div>                                                    
            </div>
            <!-- avNotes -->                
            <div class="form-group">                   
              <label for="avNotes" class="col-sm-4 control-label">avNotes</label>                   
              <div class="col-sm-8">                       
                <textarea class="form-control" rows="5" id="avNotes" name="avNotes">{{avNotes}}</textarea>                   
              </div>                                                    
            </div>    
          </fieldset>
        </div>
      </div>
      <div class="spacer-20"></div>
      <hr>
      <div class="spacer-20"></div>    
      <div class="row">    
        <div class="col-sm-12">
          <fieldset>
            <div class="control-group">            
              <div class="controls">              
                <input type="submit" class="btn btn-default" value="Änderung speichern"/>              
              </div>          
            </div>
          </fieldset>          
        </div>
      </div>      
      <div class="spacer-20"></div>       
    </form>
  </div>
</template>