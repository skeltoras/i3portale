<template name="acpCustomerEdit">
{{#if Template.subscriptionsReady}}
  <div class="container acp">
    <div class="row">
      <div class="col-sm-12">
        <h2><button class="btn btn-info" type="button" value="changeEditMode" id="changeEditMode">Editiermodus ist aus</button><button class="btn btn-default pull-right out" type="button" value="changeDetailMode" id="changeDetailMode">Detailmodus ist aus</button></h2>
      </div>      
    </div>
    <div class="row">
      <div class="col-sm-12">       
        <h2>{{#with getCustomer}}{{customerId}} <small>{{customerName}}</small>{{/with}}</h2>
      </div>
    </div>
    <div class="spacer-20"></div>    
    <div class="row">
      <div class="editModeContainer">
        {{#with getCustomer}}    
          {{#if editMode}}
            {{> acpCustomerEditEdit}}           
          {{else}}    
            {{> acpCustomerEditInfo}}    
          {{/if}}
          <div class="col-sm-4 pull-right">
            <form class="form form-horizontal" id="editCustomerData" role="form">
              <legend>Einstellungen</legend>
              <fieldset>
                <!-- customerIsApproved -->
                <div class="form-group">                                
                  <div class="col-sm-2">
                    {{#if customerIsApproved}}
                      <input type="checkbox" class="checkbox acp" id="customerIsApproved" name="customerIsApproved" checked="checked">
                    {{else}}
                      <input type="checkbox" class="checkbox acp" id="customerIsApproved" name="customerIsApproved">
                    {{/if}}
                  </div>
                  <label for="customerIsApproved" class="col-sm-10">Ist geprüft und freigegeben</label>                                                
                </div>
              </fieldset>  
              <legend>Portale</legend>
              <fieldset>
                <!-- customerHasAv -->
                <div class="form-group">                                
                  <div class="col-sm-2">
                    {{#if customerHasAv}}
                      <input type="checkbox" class="checkbox acp" id="customerHasAv" name="customerHasAv" checked="checked">
                    {{else}}
                      <input type="checkbox" class="checkbox acp" id="customerHasAv" name="customerHasAv">
                    {{/if}}
                  </div>
                  <label for="customerHasAv" class="col-sm-10">AV-Portal</label>                                                
                </div>
                <!-- customerHasRP -->
                <div class="form-group">                   
                  <div class="col-sm-2">
                    {{#if customerHasRP}}
                      <input type="checkbox" class="checkbox acp" id="customerHasRP" name="customerHasRP" checked="checked">
                    {{else}}
                      <input type="checkbox" class="checkbox acp" id="customerHasRP" name="customerHasRP">
                    {{/if}}
                  </div>
                  <label for="customerHasRP" class="col-sm-10">Reiseportal</label>                                                             
                </div>
                <!-- customerHasKG -->
                <div class="form-group">                   
                  <div class="col-sm-2">
                    {{#if customerHasKG}}
                      <input type="checkbox" class="checkbox acp" id="customerHasKG" name="customerHasKG" checked="checked">
                    {{else}}
                      <input type="checkbox" class="checkbox acp" id="customerHasKG" name="customerHasKG">
                    {{/if}}
                  </div>
                  <label for="customerHasKG" class="col-sm-10">Kindergarten-Portal</label>                                                             
                </div>
              </fieldset>
            </form>
          </div>
        {{/with}}
      </div>
      <div class="detailModeContainer">
        {{#if detailMode}}
          {{#with getCustomerDetails}}
            {{#if editMode}}
              {{> acpCustomerDetailsEdit}}           
            {{else}}    
              {{> acpCustomerDetailsInfo}}    
            {{/if}}          
          {{/with}}
        {{/if}}
      </div>      
    </div>
  </div>
{{else}}
  {{> loading}}
{{/if}}
</template>

<template name="acpCustomerEditInfo">   
  <div class="col-sm-4 acpBox">    
    <h4>Öffentliche Daten</h4>
    <p>
      {{customerName}}<br>
      {{#if customerLongName}}{{customerLongName}}<br>{{/if}}
      {{#if customerDepartment}}{{customerDepartment}}<br>{{/if}}
      {{#if customerPostAddition}}{{customerPostAddition}}<br>{{/if}}
      {{#if customerStreet}}{{customerStreet}}<br>{{/if}}
      {{#if customerPlz}}{{customerPlz}}{{/if}} {{#if customerCity}}{{customerCity}}<br>{{/if}}     
      {{#if customerCountry}}{{customerCountry}}{{/if}}          
    </p>
    <p>
      {{#if customerTelephoneFormal}}<i class="fa fa-phone"></i> {{customerTelephoneFormal}}<br>{{/if}}
      {{#if customerTelefax}}<i class="fa fa-fax"></i> {{customerTelefax}}<br>{{/if}}
      {{#if customerMailFormal}}<i class="fa fa-envelope"></i> {{customerMailFormal}}<br>{{/if}}
    </p>
    <p>
      {{#if customerInfo}}<i>{{customerInfo}}</i>{{/if}}
    </p>
    <hr>
    <h4>Kontaktdaten</h4>
    <p>      
      {{#if customerContact}}{{customerContact}}<br>{{/if}}
      {{#if customerTelephoneInternal}}<i class="fa fa-phone"></i> {{customerTelephoneInternal}}<br>{{/if}}
      {{#if customerMobil}}<i class="fa fa-phone"></i> {{customerMobil}}<br>{{/if}}
      {{#if customerMailInternal}}<i class="fa fa-envelope"></i> <a href="mailto:{{customerMailInternal}}">{{customerMailInternal}}</a><br>{{/if}}
      {{#if customerUrl}}<a href="http://{{customerUrl}}" target="_blank">{{customerUrl}}</a>{{/if}}
    </p>
    {{#if customerNotes}}
      <hr>
      <h4>Notizen</h4>
      <p>
        {{customerNotes}}
      </p>  
    {{/if}}
  </div>
</template>
                                                 
<template name="acpCustomerEditEdit"> 
  <div class="col-sm-8 acpBox">    
    <form class="form form-horizontal" id="editCustomerData" role="form">          
      <div class="spacer-20"></div>     
      <div class="row">    
        <div class="col-sm-12">
          <fieldset>
            <div class="control-group">            
              <div class="controls">              
                <input type="submit" class="btn btn-default" value="Änderung speichern"/>              
              </div>          
            </div>
          </fieldset>          
        </div>
      </div>      
      <div class="spacer-20"></div>
      <div class="row">
        <div class="col-sm-6">
          <fieldset>
            <legend>Öffentliche Daten</legend>
            <!-- customerName -->                
            <div class="form-group is-public">                   
              <label for="customerName" class="col-sm-4 control-label">Name <small>(max. 45 Zeichen)</small></label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerName" name="customerName" value="{{customerName}}" maxlength="45">                   
              </div>               
            </div>
            <!-- customerLongName -->                
            <div class="form-group is-public">                   
              <label for="customerLongName" class="col-sm-4 control-label">Name (lange Version)</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerLongName" name="customerLongName" value="{{customerLongName}}">                   
              </div>               
            </div>
            <!-- customerDepartment -->                
            <div class="form-group is-public">                   
              <label for="customerDepartment" class="col-sm-4 control-label">Abteilung</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerDepartment" name="customerDepartment" value="{{customerDepartment}}">                   
              </div>               
            </div>           
            <!-- customerPostAddition -->                
            <div class="form-group is-public">                   
              <label for="customerPostAddition" class="col-sm-4 control-label">Zusatz oder c/o</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerPostAddition" name="customerPostAddition" value="{{customerPostAddition}}">                   
              </div>               
            </div>
            <!-- customerStreet -->                
            <div class="form-group is-public">                   
              <label for="customerStreet" class="col-sm-4 control-label">Straße</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerStreet" name="customerStreet" value="{{customerStreet}}">                   
              </div>               
            </div>              
            <!-- customerPlz -->                
            <div class="form-group is-public">                   
              <label for="customerPlz" class="col-sm-4 control-label">PLZ</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerPlz" name="customerPlz" value="{{customerPlz}}">                   
              </div>               
            </div>                           
            <!-- customerCity -->                
            <div class="form-group is-public">                   
              <label for="customerCity" class="col-sm-4 control-label">Ort</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerCity" name="customerCity" value="{{customerCity}}">                   
              </div>               
            </div>
            <!-- customerCountry -->                
            <div class="form-group is-public">                   
              <label for="countryData" class="col-sm-4 control-label">Land</label>                   
              <div class="col-sm-8">                       
                {{> editAllCountries}}                   
              </div>               
            </div>
            <!-- customerTelephoneFormal -->                
            <div class="form-group is-public">                   
              <label for="customerTelephoneFormal" class="col-sm-4 control-label">Telefon</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerTelephoneFormal" name="customerTelephoneFormal" value="{{customerTelephoneFormal}}">                   
              </div>               
            </div>
            <!-- customerTelefax -->                
            <div class="form-group is-public">                   
              <label for="customerTelefax" class="col-sm-4 control-label">Fax</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerTelefax" name="customerTelefax" value="{{customerTelefax}}">                   
              </div>                                                    
            </div>
            <!-- customerMailFormal -->                
            <div class="form-group is-public">                   
              <label for="customerMailFormal" class="col-sm-4 control-label">E-Mail</label>                   
              <div class="col-sm-8">                       
                <input type="email" class="form-control" id="customerMailFormal" name="customerMailFormal" value="{{customerMailFormal}}">                   
              </div>               
            </div>                     
            <!-- customerInfo -->                
            <div class="form-group is-public">                   
              <label for="customerInfo" class="col-sm-4 control-label">Kurzinformation</label>                   
              <div class="col-sm-8">                       
                <textarea class="form-control" id="customerInfo" name="customerInfo">{{customerInfo}}</textarea>                   
              </div>                                                    
            </div>
          </fieldset>
        </div>
        <!-- internal data -->
        <div class="col-sm-6">
          <fieldset>
            <legend>Interne Daten</legend>      
            <!-- customerId -->                
            <div class="form-group">                   
              <label for="customerId" class="col-sm-4 control-label">Kunden-Nr.</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerId" name="customerId" value="{{customerId}}" disabled>                   
              </div>               
            </div>
            <!-- customerContact -->                
            <div class="form-group">                   
              <label for="customerContact" class="col-sm-4 control-label">Kontaktperson</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerContact" name="customerContact" value="{{customerContact}}">                   
              </div>                                                    
            </div>
            <!-- customerTelephoneInternal -->                
            <div class="form-group">                   
              <label for="customerTelephoneInternal" class="col-sm-4 control-label">Telefon</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerTelephoneInternal" name="customerTelephoneInternal" value="{{customerTelephoneInternal}}">                   
              </div>               
            </div>
            <!-- customerMobil -->                
            <div class="form-group">                   
              <label for="customerMobil" class="col-sm-4 control-label">Mobilnummer</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerMobil" name="customerMobil" value="{{customerMobil}}">                   
              </div>               
            </div>
            <!-- customerMailInternal -->                
            <div class="form-group">                   
              <label for="customerMailInternal" class="col-sm-4 control-label">E-Mail</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerMailInternal" name="customerMailInternal" value="{{customerMailInternal}}">                   
              </div>               
            </div>
            <!-- customerUrl -->                
            <div class="form-group">                   
              <label for="customerUrl" class="col-sm-4 control-label">Website</label>                   
              <div class="col-sm-8">                       
                <input type="text" class="form-control" id="customerUrl" name="customerUrl" value="{{customerUrl}}">                   
              </div>               
            </div> 
            <!-- customerNotes -->                
            <div class="form-group">                   
              <label for="customerNotes" class="col-sm-4 control-label">Notizen</label>                   
              <div class="col-sm-8">                       
                <textarea class="form-control" rows="5" id="customerNotes" name="customerNotes">{{customerNotes}}</textarea>                   
              </div>                                                    
            </div>    
          </fieldset>
        </div>
      </div>
      <div class="spacer-20"></div>
      <hr>
      <div class="spacer-20"></div>    
      <div class="row">    
        <div class="col-sm-12">
          <fieldset>
            <div class="control-group">            
              <div class="controls">              
                <input type="submit" class="btn btn-default" value="Änderung speichern"/>              
              </div>          
            </div>
          </fieldset>          
        </div>
      </div>      
      <div class="spacer-20"></div>       
    </form>
  </div>
</template>

<template name="acpCustomerDetailsInfo">   
  <div class="col-sm-4 acpBox">    
    <table class="table table-horizontal table-condensed">
      <caption>Detail-Daten</caption>
      <thead>
        <tr>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {{#if idAdresse}}<tr><td>Alte AV-Nummer</td><td>{{idAdresse}}</td></tr>{{/if}}
        {{#if nKundennummer}}<tr><td>Kunden-Nr. MS-Adam</td><td>{{nKundennummer}}</td></tr>{{/if}}
        {{#if dErfassung}}<tr><td>Erfassungsdatum</td><td>{{formatDate dErfassung}}</td></tr>{{/if}}
        {{#if dAenderung}}<tr><td>Änderungsdatum</td><td>{{formatDate dAenderung}}</td></tr>{{/if}}
        {{#if tEmail2}}<tr><td>E-Mail Kontakformular</td><td>{{tEmail2}}</td></tr>{{/if}}
        {{#if tEmail4}}<tr><td>E-Mail Newsletter</td><td>{{tEmail4}}</td></tr>{{/if}}
        {{#if tFragenAnKunde}}<tr><td>Fragen an Kunden</td><td>{{tFragenAnKunde}}</td></tr>{{/if}}
        {{#if tMitteilung}}<tr><td>Mittelungen von Kunden</td><td>{{tMitteilung}}</td></tr>{{/if}}
        ... TODO
      </tbody>
    </table>
  </div>
</template>

<template name="acpCustomerDetailsEdit">   
  <div class="col-sm-4 acpBox">
    EDIT:    
    ... TODO
  </div>
</template>